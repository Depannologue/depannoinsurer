<ion-header>
  <ion-navbar>
    <ion-title>
      {{ intervention.title }}
    </ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding class="about" style="background-color:#f1f1f1">
  <ion-card style="background-color:rgba(255,255,255,0.8)" >
    <ion-item style="background-color:rgba(0,0,0,0)">
      <ion-icon secondary name="contact" item-left large ></ion-icon>
      <h2 primary>Intervention N°{{intervention.id}}</h2>
      <p><b>Reférence client</b> : 074TEST </p>
      <p><b>Nom</b> : {{intervention.customer.lastname}} </p>
      <p><b>Prenom</b> : {{intervention.customer.firstname}} </p>
      <p><b>Date</b> : {{intervention.intervention_date | date: 'dd/MM/yyyy'}}</p>
      <p><b>Heure</b> : {{intervention.intervention_date | date: 'HH'}}H{{intervention.intervention_date | date: 'mm'}}</p>
      <p><b>Adresse</b>:</p>
      <p>{{intervention.address.address1}} </p>
      <p>{{intervention.address.zipcode}} {{intervention.address.city}}</p>
      <a href="tel:intervention.customer.phone_number.trim().replace('+33', '0')">
        <button clear small primary>
          <ion-icon name='call'></ion-icon>
          : {{intervention.customer.phone_number.trim().replace('+33', '0')}}
        </button>
      </a>
      <br>
      <a href="mailto:intervention.customer.email">
        <button clear small primary  >
          <ion-icon name='mail'></ion-icon>
          : {{intervention.customer.email}}
        </button>
      </a>
    </ion-item>
    <ion-item style="background-color:rgba(0,0,0,0)">
      <ion-icon InterventionProfessionIcon name="build" item-left large ></ion-icon>
      <p><b>Profession</b> : {{getProfessionNameWithId(intervention.intervention_type.profession_id)}} </p>
      <p><b>Intervention</b> : {{intervention.intervention_type.short_description}} </p>
    </ion-item>
    <ion-item style="background-color:rgba(0,0,0,0)" *ngIf="intervention.state == 'pending_pro_validation'">
      <ion-icon primary name="time" item-left large></ion-icon>
      En attente de validation par un professionnel
    </ion-item>
    <ion-item style="background-color:rgba(0,0,0,0)" *ngIf="intervention.state == 'pro_on_the_road'">
      <ion-icon primary name="car" item-left large></ion-icon>
      <h2>Dépanneur en route</h2>
      <p><button (click)="openInterventionMapPage(intervention)">
        <ion-icon name="locate"></ion-icon>
        Suivre son arrivée
      </button></p>
    </ion-item>
    <ion-item style="background-color:rgba(0,0,0,0)" *ngIf="intervention.state == 'closed'">
      <ion-icon secondary name="checkmark" item-left large></ion-icon>
      <h2>Intervention terminée</h2>
    </ion-item>
    <ion-item style="background-color:rgba(0,0,0,0)">
      <ion-icon danger name="document" item-left large ></ion-icon>
      <h2 primary>Documents</h2>
      <button primary clear >
        <ion-icon name="document"></ion-icon>
        Fiche sinistre
      </button><br>
      <button primary clear>
        <ion-icon name="document"></ion-icon>
        Facture
      </button>
      <br>
      <button secondary >
        <ion-icon name="add"></ion-icon>
        ajouter
      </button>
    </ion-item>
  </ion-card>
</ion-content>
